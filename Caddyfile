filaops.local {
    # API requests go to the backend (port 8000)
    @api path /api/* /docs /openapi.json /health
    reverse_proxy @api localhost:8000

    # Everything else goes to the frontend (port 5173)
    reverse_proxy localhost:5173

    # Security: Block sensitive files
    @blocked path /.env /.git/* /.*
    respond @blocked 404

    # Enable compression
    encode gzip

    # Logging
    log {
        output file access.log
    }
}
